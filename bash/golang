#!/usr/bin/env bash

#-------------------------------------------------------------------------------
# Golang configuration
#-------------------------------------------------------------------------------
export GOPATH=$HOME/Workspace/go
export PATH=$GOPATH/bin:$PATH
[ -d /usr/local/include ] || export CPATH=/usr/local/include:$CPATH
[ -d /usr/local/lib ] || export LIBRARY_PATH=/usr/local/lib:$LIBRARY_PATH
# Function to easily jump to anywhere in the GOPATH
function godir() {
    basedir="$GOPATH/src"
    # If not argument is provided, go the $basedir
    # Otherwise, use the argument as a regex to jump to the first matching path
    if [ -z $1 ]; then
	    pushd "${basedir}"
    else
        if which bfind &> /dev/null; then
            newdir=$(bfind -type d -name ".*${1}.*" -1 "$GOPATH/src")
        else
            newdir=$(find "$GOPATH/src" -type d -path "*${1}*" -print -quit)
        fi
        pushd "${newdir}"
    fi
}

#-------------------------------------------------------------------------------
# Golang aliases
#-------------------------------------------------------------------------------
alias gg="go get -v -u"
alias gocover="go test -v -coverprofile=c.out && go tool cover -html=c.out"
